<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>StarNEig User&#39;s Guide: Test program</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">StarNEig User&#39;s Guide
   &#160;<span id="projectnumber">v0.1.6</span>
   </div>
   <div id="projectbrief">A task-based library for solving dense nonsymmetric eigenvalue problems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__7_test_driver.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Test program </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The test program provides an unified interface for testing the entire library. Most command line arguments have default values so only few of them have to be set in most situations. General usage information can be printed as follows:</p>
<div class="fragment"><div class="line">$ ./starneig-test</div>
<div class="line">Usage: ./starneig-test (options)</div>
<div class="line"> </div>
<div class="line">Global options:</div>
<div class="line">  --mpi -- Enable MPI</div>
<div class="line">  --mpi-mode [serialized,multiple] -- MPI mode</div>
<div class="line">  --seed (num) -- Random number generator seed</div>
<div class="line">  --experiment (experiment) -- Experiment module</div>
<div class="line">  --test-workers [(num),default] -- Test program StarPU worker count</div>
<div class="line">  --blas-threads [(num),default] -- Test program BLAS thread count</div>
<div class="line">  --lapack-threads [(num),default] -- LAPACK solver thread count</div>
<div class="line">  --scalapack-threads [(num),default] -- ScaLAPACK solver thread count</div>
<div class="line"> </div>
<div class="line">Available experiment modules:</div>
<div class="line">    &#39;hessenberg&#39; : Hessenberg reduction experiment</div>
<div class="line">    &#39;schur&#39; : Schur reduction experiment</div>
<div class="line">    &#39;reorder&#39; : Eigenvalue reordering experiment</div>
<div class="line">    &#39;eigenvectors&#39; : Eigenvectors experiment</div>
<div class="line">    &#39;full-chain&#39; : Full chain experiment</div>
<div class="line">    &#39;partial-hessenberg&#39; : Partial Hessenberg reduction experiment</div>
<div class="line">    &#39;validator&#39; : Validation experiment</div>
</div><!-- fragment --><p>The <code>--mpi</code> option enables the MPI support and <code>--seed (num)</code> option initializes the random number generator with a given seed. Available experiment modules are listed below the global options and the desired experiment module is selected with the <code>--experiment (experiment)</code> option. For example, the Hessenberg reduction specific experiment module usage information can be printed as follows:</p>
<div class="fragment"><div class="line">$ ./starneig-test --experiment hessenberg</div>
<div class="line">Usage: ./starneig-test (options)</div>
<div class="line"> </div>
<div class="line">Global options:</div>
<div class="line">  --mpi -- Enable MPI</div>
<div class="line">  --mpi-mode [serialized,multiple] -- MPI mode</div>
<div class="line">  --seed (num) -- Random number generator seed</div>
<div class="line">  --experiment (experiment) -- Experiment module</div>
<div class="line">  --test-workers [(num),default] -- Test program StarPU worker count</div>
<div class="line">  --blas-threads [(num),default] -- Test program BLAS thread count</div>
<div class="line">  --lapack-threads [(num),default] -- LAPACK solver thread count</div>
<div class="line">  --scalapack-threads [(num),default] -- ScaLAPACK solver thread count</div>
<div class="line"> </div>
<div class="line">Available experiment modules:</div>
<div class="line">    &#39;hessenberg&#39; : Hessenberg reduction experiment</div>
<div class="line">    &#39;schur&#39; : Schur reduction experiment</div>
<div class="line">    &#39;reorder&#39; : Eigenvalue reordering experiment</div>
<div class="line">    &#39;eigenvectors&#39; : Eigenvectors experiment</div>
<div class="line">    &#39;full-chain&#39; : Full chain experiment</div>
<div class="line">    &#39;partial-hessenberg&#39; : Partial Hessenberg reduction experiment</div>
<div class="line">    &#39;validator&#39; : Validation experiment</div>
<div class="line"> </div>
<div class="line">Experiment module (hessenberg) specific options:</div>
<div class="line">  --data-format (format) -- Data format</div>
<div class="line">  --init (initializer) -- Initialization module</div>
<div class="line">  --solver (solver) -- Solver module</div>
<div class="line">  --hooks (hook:mode, ...) -- Hooks and modes</div>
<div class="line">  --no-reinit -- Do not reinitialize after each repetition</div>
<div class="line">  --repeat (num) -- Repeated experiment</div>
<div class="line">  --warmup (num) -- Perform &quot;warmups&quot;</div>
<div class="line">  --keep-going -- Try to recover from a solver failure</div>
<div class="line">  --abort -- Call abort() in failure</div>
<div class="line">...</div>
</div><!-- fragment --><p>The overall design of the test program is modular. Each experiment module is built on <em>initializers</em>, <em>solvers</em> and <em>hooks</em>. Each experiment module contains several of each, thus allowing a user to initialize the inout data in various ways and compare different solvers with each other. Each of these building blocks can be configured with various command line arguments. However, in most situations only the problem dimension <code>--n (num)</code> needs to be specified.</p>
<p>Hooks are used to test and validate the output of the solver. For example, <code>--hooks hessenberg residual print</code> option enables hooks that</p>
<ul>
<li>check whether the output matrix is in upper Hessenberg form;</li>
<li>computes the related residuals using Frobenius norm (reported in terms of unit roundoff error) and checks that they are within the permissible limits; and</li>
<li>prints the output matrices.</li>
</ul>
<p>Certain general purpose initializers allow a user to read the input data from a disk (<code>read-mtx</code> and <code>read-raw</code>) and output data can be stored to a disk using a suitable post-processing hook (<code>store-raw</code>).</p>
<p>The test program supports various data formats. For example, shared memory experiments are usually performed using the <code>pencil-local</code> data format which stores the matrices continuously in the main memory. Distributed memory experiments are performed using either a StarNEig library specific distributed data format (<code>pencil-starneig</code>) and the BLACS data format (<code>pencil-starneig-blacs</code>). The test program will detect the correct data format automatically. The test program is also is capable of converting the data between various data formats. The related data converter modules can be in most cases configured using additional command line arguments. For example, the distributed data formats distribute the data in rectangular sections and the section size can be set with command line arguments <code>--section-height (num)</code> and <code>--section-width (num)</code>).</p>
<h1>Performance models</h1>
<p>The StarPU performance models must be calibrated before the software can function efficiently on heterogeneous platforms (CPUs+GPUs). The calibration is triggered automatically if the models are not calibrated well enough for a given problem size. This can impact the execution time negatively. The test program provides an easy-to-use solution for this problem: </p><div class="fragment"><div class="line">$ ./starneig-test ... --warmup 3</div>
</div><!-- fragment --><p>The <code>--warmup (number)</code> argument causes the test program to perform a number of warm-up runs before the actual execution time measurement takes place.</p>
<p>Please see the StarPU handbook for further instructions: <a href="http://starpu.gforge.inria.fr/doc/html/Scheduling.html">http://starpu.gforge.inria.fr/doc/html/Scheduling.html</a></p>
<h1>Examples</h1>
<ul>
<li>Reorder a 4000 x 4000 matrix using the StarNEig implementation:</li>
</ul>
<div class="fragment"><div class="line">$ ./starneig-test --experiment reorder --n 4000</div>
<div class="line">TEST: --seed 1585762840 --experiment reorder --test-workers default --blas-threads default --lapack-threads default --scalapack-threads default --data-format pencil-local --init default --n 4000 --complex-distr uniform --complex-ratio 0.500000 --zero-ratio 0.010000 --inf-ratio 0.010000 --data-distr default --section-height default --section-width default --select-ratio 0.350000 --solver starneig --cores default --gpus default --tile-size default --window-size default --values-per-chain default --small-window-size default --small-window-threshold default --update-width default --update-height default --plan default --blueprint default --hooks schur:normal eigenvalues:normal analysis:normal reordering:normal residual:normal --eigenvalues-fail-threshold 10000 --eigenvalues-warn-threshold 1000 --reordering-fail-threshold 10000 --reordering-warn-threshold 1000 --residual-fail-threshold 10000 --residual-warn-threshold 500 --repeat 1 --warmup 0</div>
<div class="line">THREADS: Using 6 StarPU worker threads during initialization and validation.</div>
<div class="line">THREADS: Using 6 BLAS threads during initialization and validation.</div>
<div class="line">THREADS: Using 6 BLAS threads in LAPACK solvers.</div>
<div class="line">THREADS: Using 1 BLAS threads in ScaLAPACK solvers.</div>
<div class="line">INIT...</div>
<div class="line">PREPARE...</div>
<div class="line">PROCESS...</div>
<div class="line">[starneig][message] Setting tile size to 192.</div>
<div class="line">[starneig][message] Using multi-part task insertion plan.</div>
<div class="line">[starneig][message] Using two-pass backward dummy blueprint.</div>
<div class="line">[starneig][message] Using &quot;rounded&quot; window size.</div>
<div class="line">EXPERIMENT TIME = 1701 MS</div>
<div class="line">FINALIZE...</div>
<div class="line">EIGENVALUES CHECK: mean = 0 u, min = 0 u, max = 0 u</div>
<div class="line">EIGENVALUES ANALYSIS: zeros = 36, infinities = 0, indefinites = 0</div>
<div class="line">EIGENVALUES ANALYSIS: close zeros = 0, close infinities = 0, close indefinites = 0</div>
<div class="line">REORDERING CHECK: Checking selected eigenvalues...</div>
<div class="line">REORDERING CHECK: Checking other eigenvalues...</div>
<div class="line">REORDERING CHECK: mean = 71 u, min = 0 u, max = 526 u</div>
<div class="line">|Q ~A Q^T - A| / |A| = 314 u</div>
<div class="line">|Q Q^T - I| / |I| = 140 u</div>
<div class="line">================================================================</div>
<div class="line">TIME = 1701 MS [avg 1701 MS, cv 0.00, min 1701 MS, max 1701 MS]</div>
<div class="line">NO FAILED SCHUR FORM TESTS</div>
<div class="line">EIGENVALUES CHECK (WARNINGS): 0 runs effected [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES CHECK (FAILS): 0 runs effected [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES CHECK (MEANS): [avg 0 u, cv 0.00, min 0 u, max 0 u]</div>
<div class="line">EIGENVALUES CHECK (MIN): [avg 0 u, cv 0.00, min 0 u, max 0 u]</div>
<div class="line">EIGENVALUES CHECK (MAX): [avg 0 u, cv 0.00, min 0 u, max 0 u]</div>
<div class="line">EIGENVALUES ANALYSIS (ZEROS): [avg 36.0, cv 0.00, min 36, max 36]</div>
<div class="line">EIGENVALUES ANALYSIS (CLOSE ZEROS): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (INFINITIES): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (CLOSE INFINITIES): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (INDEFINITES): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (CLOSE INDEFINITES): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">REORDERING CHECK (WARNINGS): 0 runs effected [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">REORDERING CHECK (FAILS): 0 runs effected [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">REORDERING CHECK (MEANS): [avg 71 u, cv 0.00, min 71 u, max 71 u]</div>
<div class="line">REORDERING CHECK (MIN): [avg 0 u, cv 0.00, min 0 u, max 0 u]</div>
<div class="line">REORDERING CHECK (MAX): [avg 526 u, cv 0.00, min 526 u, max 526 u]</div>
<div class="line">|Q ~A Q^T - A| / |A| = [avg 314 u, cv 0.00, min 314 u, max 314 u]</div>
<div class="line">|Q Q^T - I| / |I| = [avg 140 u, cv 0.00, min 140 u, max 140 u]</div>
</div><!-- fragment --><ul>
<li>Reorder a 4000 x 4000 matrix stencil \((A,B)\) using the StarNEig implementation, initialize the random number generator using the seed <code>1480591971</code>, fortify the matrix stencil \((A,B)\) against failed swaps, and disable GPUs:</li>
</ul>
<div class="fragment"><div class="line">$ ./starneig-test --experiment reorder --n 4000 --generalized --seed 1480591971 --fortify --gpus 0</div>
<div class="line">TEST: --seed 1480591971 --experiment reorder --test-workers default --blas-threads default --lapack-threads default --scalapack-threads default --data-format pencil-local --init default --n 4000 --generalized --complex-distr uniform --fortify --data-distr default --section-height default --section-width default --select-ratio 0.350000 --solver starneig --cores default --gpus 0 --tile-size default --window-size default --values-per-chain default --small-window-size default --small-window-threshold default --update-width default --update-height default --plan default --blueprint default --hooks schur:normal eigenvalues:normal analysis:normal reordering:normal residual:normal --eigenvalues-fail-threshold 10000 --eigenvalues-warn-threshold 1000 --reordering-fail-threshold 10000 --reordering-warn-threshold 1000 --residual-fail-threshold 10000 --residual-warn-threshold 500 --repeat 1 --warmup 0</div>
<div class="line">THREADS: Using 6 StarPU worker threads during initialization and validation.</div>
<div class="line">THREADS: Using 6 BLAS threads during initialization and validation.</div>
<div class="line">THREADS: Using 6 BLAS threads in LAPACK solvers.</div>
<div class="line">THREADS: Using 1 BLAS threads in ScaLAPACK solvers.</div>
<div class="line">INIT...</div>
<div class="line">PREPARE...</div>
<div class="line">PROCESS...</div>
<div class="line">[starneig][message] Setting tile size to 192.</div>
<div class="line">[starneig][message] Using multi-part task insertion plan.</div>
<div class="line">[starneig][message] Using two-pass backward dummy blueprint.</div>
<div class="line">[starneig][message] Using &quot;rounded&quot; window size.</div>
<div class="line">EXPERIMENT TIME = 7472 MS</div>
<div class="line">FINALIZE...</div>
<div class="line">EIGENVALUES CHECK: mean = 0 u, min = 0 u, max = 0 u</div>
<div class="line">EIGENVALUES ANALYSIS: zeros = 0, infinities = 0, indefinites = 0</div>
<div class="line">EIGENVALUES ANALYSIS: close zeros = 0, close infinities = 0, close indefinites = 0</div>
<div class="line">REORDERING CHECK: Checking selected eigenvalues...</div>
<div class="line">REORDERING CHECK: Checking other eigenvalues...</div>
<div class="line">REORDERING CHECK: mean = 23 u, min = 0 u, max = 169 u</div>
<div class="line">|Q ~A Z^T - A| / |A| = 46 u</div>
<div class="line">|Q ~B Z^T - B| / |B| = 63 u</div>
<div class="line">|Q Q^T - I| / |I| = 44 u</div>
<div class="line">|Z Z^T - I| / |I| = 43 u</div>
<div class="line">================================================================</div>
<div class="line">TIME = 7472 MS [avg 7472 MS, cv 0.00, min 7472 MS, max 7472 MS]</div>
<div class="line">NO FAILED SCHUR FORM TESTS</div>
<div class="line">EIGENVALUES CHECK (WARNINGS): 0 runs effected [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES CHECK (FAILS): 0 runs effected [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES CHECK (MEANS): [avg 0 u, cv 0.00, min 0 u, max 0 u]</div>
<div class="line">EIGENVALUES CHECK (MIN): [avg 0 u, cv 0.00, min 0 u, max 0 u]</div>
<div class="line">EIGENVALUES CHECK (MAX): [avg 0 u, cv 0.00, min 0 u, max 0 u]</div>
<div class="line">EIGENVALUES ANALYSIS (ZEROS): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (CLOSE ZEROS): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (INFINITIES): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (CLOSE INFINITIES): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (INDEFINITES): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (CLOSE INDEFINITES): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">REORDERING CHECK (WARNINGS): 0 runs effected [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">REORDERING CHECK (FAILS): 0 runs effected [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">REORDERING CHECK (MEANS): [avg 23 u, cv 0.00, min 23 u, max 23 u]</div>
<div class="line">REORDERING CHECK (MIN): [avg 0 u, cv 0.00, min 0 u, max 0 u]</div>
<div class="line">REORDERING CHECK (MAX): [avg 169 u, cv 0.00, min 169 u, max 169 u]</div>
<div class="line">|Q ~A Z^T - A| / |A| = [avg 46 u, cv 0.00, min 46 u, max 46 u]</div>
<div class="line">|Q ~B Z^T - B| / |B| = [avg 63 u, cv 0.00, min 63 u, max 63 u]</div>
<div class="line">|Q Q^T - I| / |I| = [avg 44 u, cv 0.00, min 44 u, max 44 u]</div>
<div class="line">|Z Z^T - I| / |I| = [avg 43 u, cv 0.00, min 43 u, max 43 u]</div>
</div><!-- fragment --><ul>
<li>Reduce a dense matrix to upper Hessenberg form, validate the output and store the output matrices to the disk:</li>
</ul>
<div class="fragment"><div class="line">$ ./starneig-test --experiment hessenberg --n 4000 --hooks hessenberg residual store-raw --store-raw-output hessenberg_%s.dat</div>
<div class="line">TEST: --seed 1585762935 --experiment hessenberg --test-workers default --blas-threads default --lapack-threads default --scalapack-threads default --data-format pencil-local --init default --n 4000 --data-distr default --section-height default --section-width default --solver starneig --cores default --gpus default --tile-size default --panel-width default --hooks hessenberg:normal residual:normal store-raw:normal --residual-fail-threshold 10000 --residual-warn-threshold 500 --store-raw-output hessenberg_%s.dat --repeat 1 --warmup 0</div>
<div class="line">THREADS: Using 6 StarPU worker threads during initialization and validation.</div>
<div class="line">THREADS: Using 6 BLAS threads during initialization and validation.</div>
<div class="line">THREADS: Using 6 BLAS threads in LAPACK solvers.</div>
<div class="line">THREADS: Using 1 BLAS threads in ScaLAPACK solvers.</div>
<div class="line">INIT...</div>
<div class="line">PREPARE...</div>
<div class="line">PROCESS...</div>
<div class="line">[starneig][message] Setting tile size to 336.</div>
<div class="line">[starneig][message] Setting panel width to 288.</div>
<div class="line">EXPERIMENT TIME = 13121 MS</div>
<div class="line">FINALIZE...</div>
<div class="line">|Q ~A Q^T - A| / |A| = 15 u</div>
<div class="line">|Q Q^T - I| / |I| = 11 u</div>
<div class="line">WRITING TO hessenberg_A.dat...</div>
<div class="line">WRITING TO hessenberg_Q.dat...</div>
<div class="line">WRITING TO hessenberg_CA.dat...</div>
<div class="line">================================================================</div>
<div class="line">TIME = 13121 MS [avg 13121 MS, cv 0.00, min 13121 MS, max 13121 MS]</div>
<div class="line">NO FAILED HESSENBERG FORM TESTS</div>
<div class="line">|Q ~A Q^T - A| / |A| = [avg 15 u, cv 0.00, min 15 u, max 15 u]</div>
<div class="line">|Q Q^T - I| / |I| = [avg 11 u, cv 0.00, min 11 u, max 11 u]</div>
</div><!-- fragment --><ul>
<li>Read an upper Hessenberg matrix from the disk, reduce it to Schur form and set tile size to <code>128</code>:</li>
</ul>
<div class="fragment"><div class="line">$ ./starneig-test --experiment schur --init read-raw --input hessenberg_%s.dat --tile-size 128</div>
<div class="line">TEST: --seed 1585762972 --experiment schur --test-workers default --blas-threads default --lapack-threads default --scalapack-threads default --data-format pencil-local --init read-raw --input hessenberg_%s.dat --data-distr default --section-height default --section-width default --solver starneig --cores default --gpus default --iteration-limit default --tile-size 128 --small-limit default --aed-window-size default --aed-shift-count default --aed-nibble default --aed-parallel-soft-limit default --aed-parallel-hard-limit default --window-size default --shifts-per-window default --update-width default --update-height default --left-threshold default --right-threshold default --inf-threshold default --hooks schur:normal eigenvalues:normal known-eigenvalues:normal analysis:normal residual:normal --eigenvalues-fail-threshold 10000 --eigenvalues-warn-threshold 1000 --known-eigenvalues-fail-threshold 1000000 --known-eigenvalues-warn-threshold 10000 --residual-fail-threshold 10000 --residual-warn-threshold 500 --repeat 1 --warmup 0</div>
<div class="line">THREADS: Using 6 StarPU worker threads during initialization and validation.</div>
<div class="line">THREADS: Using 6 BLAS threads during initialization and validation.</div>
<div class="line">THREADS: Using 6 BLAS threads in LAPACK solvers.</div>
<div class="line">THREADS: Using 1 BLAS threads in ScaLAPACK solvers.</div>
<div class="line">INIT...</div>
<div class="line">READING FROM hessenberg_A.dat...</div>
<div class="line">READING A 4000 X 4000 MATRIX ...</div>
<div class="line">READING FROM hessenberg_Q.dat...</div>
<div class="line">READING A 4000 X 4000 MATRIX ...</div>
<div class="line">READING FROM hessenberg_CA.dat...</div>
<div class="line">READING A 4000 X 4000 MATRIX ...</div>
<div class="line">PREPARE...</div>
<div class="line">PROCESS...</div>
<div class="line">[starneig][message] Using AED windows size 320.</div>
<div class="line">[starneig][message] Using 240 shifts.</div>
<div class="line">EXPERIMENT TIME = 9479 MS</div>
<div class="line">FINALIZE...</div>
<div class="line">EIGENVALUES CHECK: mean = 0 u, min = 0 u, max = 0 u</div>
<div class="line">KNOWN EIGENVALUES CHECK: The stored pencil does not contain the known eigenvalues. Skipping.</div>
<div class="line">EIGENVALUES ANALYSIS: zeros = 0, infinities = 0, indefinites = 0</div>
<div class="line">EIGENVALUES ANALYSIS: close zeros = 0, close infinities = 0, close indefinites = 0</div>
<div class="line">|Q ~A Q^T - A| / |A| = 68 u</div>
<div class="line">|Q Q^T - I| / |I| = 89 u</div>
<div class="line">================================================================</div>
<div class="line">TIME = 9479 MS [avg 9479 MS, cv 0.00, min 9479 MS, max 9479 MS]</div>
<div class="line">NO FAILED SCHUR FORM TESTS</div>
<div class="line">EIGENVALUES CHECK (WARNINGS): 0 runs effected [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES CHECK (FAILS): 0 runs effected [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES CHECK (MEANS): [avg 0 u, cv 0.00, min 0 u, max 0 u]</div>
<div class="line">EIGENVALUES CHECK (MIN): [avg 0 u, cv 0.00, min 0 u, max 0 u]</div>
<div class="line">EIGENVALUES CHECK (MAX): [avg 0 u, cv 0.00, min 0 u, max 0 u]</div>
<div class="line">EIGENVALUES ANALYSIS (ZEROS): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (CLOSE ZEROS): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (INFINITIES): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (CLOSE INFINITIES): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (INDEFINITES): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (CLOSE INDEFINITES): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">|Q ~A Q^T - A| / |A| = [avg 68 u, cv 0.00, min 68 u, max 68 u]</div>
<div class="line">|Q Q^T - I| / |I| = [avg 89 u, cv 0.00, min 89 u, max 89 u]</div>
</div><!-- fragment --><h1>Distributed memory example</h1>
<ul>
<li>Reorder a 4000 x 4000 matrix using the StarNEig implementation, use two MPI ranks, use three CPU cores per rank, distribute the matrix in 1024 x 1024 sections, and use tile size 256:</li>
</ul>
<div class="fragment"><div class="line">$ mpirun -n 2 --map-by :PE=3 ./starneig-test --mpi --experiment reorder --n 4000 --section-height 1024 --section-width 1024 --tile-size 256</div>
</div><!-- fragment --><p>Rank 0 output:</p>
<div class="fragment"><div class="line">MPI INIT...</div>
<div class="line">TEST: --mpi --mpi-mode serialized --seed 1585763077 --experiment reorder --test-workers default --blas-threads default --lapack-threads default --scalapack-threads default --data-format pencil-starneig-blacs --init default --n 4000 --complex-distr uniform --complex-ratio 0.500000 --zero-ratio 0.010000 --inf-ratio 0.010000 --data-distr default --section-height 1024 --section-width 1024 --select-ratio 0.350000 --solver starneig --cores default --gpus default --tile-size 256 --window-size default --values-per-chain default --small-window-size default --small-window-threshold default --update-width default --update-height default --plan default --blueprint default --hooks schur:normal eigenvalues:normal analysis:normal reordering:normal residual:normal --eigenvalues-fail-threshold 10000 --eigenvalues-warn-threshold 1000 --reordering-fail-threshold 10000 --reordering-warn-threshold 1000 --residual-fail-threshold 10000 --residual-warn-threshold 500 --repeat 1 --warmup 0</div>
<div class="line">THREADS: Using 3 StarPU worker threads during initialization and validation.</div>
<div class="line">THREADS: Using 3 BLAS threads during initialization and validation.</div>
<div class="line">THREADS: Using 3 BLAS threads in LAPACK solvers.</div>
<div class="line">THREADS: Using 1 BLAS threads in ScaLAPACK solvers.</div>
<div class="line">INIT...</div>
<div class="line">PREPARE...</div>
<div class="line">PROCESS...</div>
<div class="line">[starneig][message] Attempting to set tile size to 256.</div>
<div class="line">[starneig][message] Setting tile size to 256.</div>
<div class="line">[starneig][message] Using multi-part task insertion plan.</div>
<div class="line">[starneig][message] Using two-pass backward dummy blueprint.</div>
<div class="line">[starneig][message] Using &quot;rounded&quot; window size.</div>
<div class="line">EXPERIMENT TIME = 3320 MS</div>
<div class="line">FINALIZE...</div>
<div class="line">EIGENVALUES CHECK: mean = 0 u, min = 0 u, max = 0 u</div>
<div class="line">EIGENVALUES ANALYSIS: zeros = 37, infinities = 0, indefinites = 0</div>
<div class="line">EIGENVALUES ANALYSIS: close zeros = 0, close infinities = 0, close indefinites = 0</div>
<div class="line">REORDERING CHECK: Checking selected eigenvalues...</div>
<div class="line">REORDERING CHECK: Checking other eigenvalues...</div>
<div class="line">REORDERING CHECK: mean = 70 u, min = 0 u, max = 527 u</div>
<div class="line">|Q ~A Q^T - A| / |A| = 314 u</div>
<div class="line">|Q Q^T - I| / |I| = 139 u</div>
<div class="line">================================================================</div>
<div class="line">TIME = 3319 MS [avg 3320 MS, cv 0.00, min 3320 MS, max 3320 MS]</div>
<div class="line">NO FAILED SCHUR FORM TESTS</div>
<div class="line">EIGENVALUES CHECK (WARNINGS): 0 runs effected [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES CHECK (FAILS): 0 runs effected [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES CHECK (MEANS): [avg 0 u, cv 0.00, min 0 u, max 0 u]</div>
<div class="line">EIGENVALUES CHECK (MIN): [avg 0 u, cv 0.00, min 0 u, max 0 u]</div>
<div class="line">EIGENVALUES CHECK (MAX): [avg 0 u, cv 0.00, min 0 u, max 0 u]</div>
<div class="line">EIGENVALUES ANALYSIS (ZEROS): [avg 37.0, cv 0.00, min 37, max 37]</div>
<div class="line">EIGENVALUES ANALYSIS (CLOSE ZEROS): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (INFINITIES): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (CLOSE INFINITIES): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (INDEFINITES): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (CLOSE INDEFINITES): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">REORDERING CHECK (WARNINGS): 0 runs effected [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">REORDERING CHECK (FAILS): 0 runs effected [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">REORDERING CHECK (MEANS): [avg 70 u, cv 0.00, min 70 u, max 70 u]</div>
<div class="line">REORDERING CHECK (MIN): [avg 0 u, cv 0.00, min 0 u, max 0 u]</div>
<div class="line">REORDERING CHECK (MAX): [avg 527 u, cv 0.00, min 527 u, max 527 u]</div>
<div class="line">|Q ~A Q^T - A| / |A| = [avg 314 u, cv 0.00, min 314 u, max 314 u]</div>
<div class="line">|Q Q^T - I| / |I| = [avg 139 u, cv 0.00, min 139 u, max 139 u]</div>
</div><!-- fragment --><p>Rank 1 output:</p>
<div class="fragment"><div class="line">MPI INIT...</div>
<div class="line">TEST: --mpi --mpi-mode serialized --seed 1585763077 --experiment reorder --test-workers default --blas-threads default --lapack-threads default --scalapack-threads default --data-format pencil-starneig-blacs --init default --n 4000 --complex-distr uniform --complex-ratio 0.500000 --zero-ratio 0.010000 --inf-ratio 0.010000 --data-distr default --section-height 1024 --section-width 1024 --select-ratio 0.350000 --solver starneig --cores default --gpus default --tile-size 256 --window-size default --values-per-chain default --small-window-size default --small-window-threshold default --update-width default --update-height default --plan default --blueprint default --hooks schur:normal eigenvalues:normal analysis:normal reordering:normal residual:normal --eigenvalues-fail-threshold 10000 --eigenvalues-warn-threshold 1000 --reordering-fail-threshold 10000 --reordering-warn-threshold 1000 --residual-fail-threshold 10000 --residual-warn-threshold 500 --repeat 1 --warmup 0</div>
<div class="line">THREADS: Using 3 StarPU worker threads during initialization and validation.</div>
<div class="line">THREADS: Using 3 BLAS threads during initialization and validation.</div>
<div class="line">THREADS: Using 3 BLAS threads in LAPACK solvers.</div>
<div class="line">THREADS: Using 1 BLAS threads in ScaLAPACK solvers.</div>
<div class="line">INIT...</div>
<div class="line">PREPARE...</div>
<div class="line">PROCESS...</div>
<div class="line">[starneig][message] Attempting to set tile size to 256.</div>
<div class="line">[starneig][message] Setting tile size to 256.</div>
<div class="line">[starneig][message] Using multi-part task insertion plan.</div>
<div class="line">[starneig][message] Using two-pass backward dummy blueprint.</div>
<div class="line">[starneig][message] Using &quot;rounded&quot; window size.</div>
<div class="line">EXPERIMENT TIME = 3320 MS</div>
<div class="line">FINALIZE...</div>
<div class="line">EIGENVALUES CHECK: mean = 0 u, min = 0 u, max = 0 u</div>
<div class="line">EIGENVALUES ANALYSIS: zeros = 37, infinities = 0, indefinites = 0</div>
<div class="line">EIGENVALUES ANALYSIS: close zeros = 0, close infinities = 0, close indefinites = 0</div>
<div class="line">REORDERING CHECK: Checking selected eigenvalues...</div>
<div class="line">REORDERING CHECK: Checking other eigenvalues...</div>
<div class="line">REORDERING CHECK: mean = 70 u, min = 0 u, max = 527 u</div>
<div class="line">|Q ~A Q^T - A| / |A| = 314 u</div>
<div class="line">|Q Q^T - I| / |I| = 139 u</div>
<div class="line">================================================================</div>
<div class="line">TIME = 3319 MS [avg 3320 MS, cv 0.00, min 3320 MS, max 3320 MS]</div>
<div class="line">NO FAILED SCHUR FORM TESTS</div>
<div class="line">EIGENVALUES CHECK (WARNINGS): 0 runs effected [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES CHECK (FAILS): 0 runs effected [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES CHECK (MEANS): [avg 0 u, cv 0.00, min 0 u, max 0 u]</div>
<div class="line">EIGENVALUES CHECK (MIN): [avg 0 u, cv 0.00, min 0 u, max 0 u]</div>
<div class="line">EIGENVALUES CHECK (MAX): [avg 0 u, cv 0.00, min 0 u, max 0 u]</div>
<div class="line">EIGENVALUES ANALYSIS (ZEROS): [avg 37.0, cv 0.00, min 37, max 37]</div>
<div class="line">EIGENVALUES ANALYSIS (CLOSE ZEROS): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (INFINITIES): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (CLOSE INFINITIES): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (INDEFINITES): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">EIGENVALUES ANALYSIS (CLOSE INDEFINITES): [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">REORDERING CHECK (WARNINGS): 0 runs effected [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">REORDERING CHECK (FAILS): 0 runs effected [avg 0.0, cv 0.00, min 0, max 0]</div>
<div class="line">REORDERING CHECK (MEANS): [avg 70 u, cv 0.00, min 70 u, max 70 u]</div>
<div class="line">REORDERING CHECK (MIN): [avg 0 u, cv 0.00, min 0 u, max 0 u]</div>
<div class="line">REORDERING CHECK (MAX): [avg 527 u, cv 0.00, min 527 u, max 527 u]</div>
<div class="line">|Q ~A Q^T - A| / |A| = [avg 314 u, cv 0.00, min 314 u, max 314 u]</div>
<div class="line">|Q Q^T - I| / |I| = [avg 139 u, cv 0.00, min 139 u, max 139 u]</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>

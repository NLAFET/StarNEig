<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>StarNEig User&#39;s Guide: Installation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">StarNEig User&#39;s Guide
   &#160;<span id="projectnumber">v0.1.8</span>
   </div>
   <div id="projectbrief">A task-based library for solving dense nonsymmetric eigenvalue problems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__1_installation.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Installation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Prebuild binary packages (Ubuntu 18.04 and Ubuntu 20.04) are available under <a href="https://github.com/NLAFET/StarNEig/releases">releases</a> and can be installed with the following command:</p>
<div class="fragment"><div class="line">$ sudo apt install ./StarNEig-v0.xx.yy-ubuntu-vv.uu.deb</div>
</div><!-- fragment --><p>The binary packages rely on mainstream StarPU packages and do not necessary provide full functionality.</p>
<p>For full functionality, it is recommended that StarNEig (and StarPU) are compiled from the source code, see below and/or the StarNEig User's Guide. Please consider using one of the tested <a href="https://github.com/NLAFET/StarNEig/releases">release</a> versions.</p>
<h1>Dependencies</h1>
<p>Library dependencies:</p>
<ul>
<li>Linux</li>
<li>CMake 3.3 or newer</li>
<li>Portable Hardware Locality (hwloc)</li>
<li>Starpu 1.2 or 1.3<ul>
<li>Newer versions require the user set the <code>STARPU_LIBRARIES</code>, <code>STARPU_MPI_LIBRARIES</code> and <code>STARPU_INCLUDE_PATH</code> environmental variables.</li>
</ul>
</li>
<li>OpenBLAS, MKL, GotoBLAS or single-threaded BLAS library</li>
<li>LAPACK</li>
<li>MPI (optional)</li>
<li>CUDA (optional)</li>
<li>ScaLAPACK + BLACS (optional)</li>
</ul>
<p>Test program and example code dependencies:</p>
<ul>
<li>pkg-config</li>
<li>GNU Scientific Library (optional)</li>
<li>MAGMA (optional)</li>
</ul>
<dl class="section attention"><dt>Attention</dt><dd>StarNEig supports OpenBLAS, MKL and GotoBLAS. For optimal performance, a multi-threaded variant of one of the listed BLAS libraries must be provided. StarNEig will automatically set the BLAS library to single-threaded more when necessary. If a different BLAS library is provided, then the user is responsible for setting the BLAS library to <em>single-threaded</em> mode. However, the use of a non-supported BLAS library can still impact the performance negatively.</dd></dl>
<h2>StarPU 1.3.4 installation</h2>
<ol type="1">
<li>Download StarPU 1.3.4 (or newer) from <a href="http://starpu.gforge.inria.fr/files/">http://starpu.gforge.inria.fr/files/</a></li>
<li>Unzip the package and create/enter directory <code>starpu-1.3.4/build</code></li>
<li>Configure: <code>$ ../configure</code></li>
<li>Compile: <code>$ make</code></li>
<li>Install: <code>$ sudo make install</code></li>
</ol>
<p>The default installation path is <code>/usr/local</code> but this can be changed during the configuration phase (<code>$ ../configure --prefix=...</code>). It is something necessary to append the <code>CPATH</code>, <code>LIBRARY_PATH</code>, and <code>LD_LIBRARY_PATH</code> environmental variables by adding the following to <code>~/.profile</code>: </p><div class="fragment"><div class="line">export CPATH=$CPATH:/usr/local/include/</div>
<div class="line">export LIBRARY_PATH=$LIBRARY_PATH:/usr/local/lib/</div>
<div class="line">export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib/</div>
</div><!-- fragment --><p>See the StarPU handbook for further instructions: <a href="http://starpu.gforge.inria.fr/doc/html/BuildingAndInstallingStarPU.html">http://starpu.gforge.inria.fr/doc/html/BuildingAndInstallingStarPU.html</a></p>
<h1>Configuration</h1>
<p>It is recommended that a user builds the library in a separate build directory: </p><div class="fragment"><div class="line">$ cd path_to_the_top_directory/</div>
<div class="line">$ mkdir build</div>
<div class="line">$ cd build</div>
</div><!-- fragment --><p>The library is configured with the <code>cmake</code> command. In most cases, it is not necessary to give this command any additional arguments: </p><div class="fragment"><div class="line">$ cmake ../</div>
<div class="line">...</div>
<div class="line">-- Configuring done</div>
<div class="line">-- Generating done</div>
<div class="line">-- Build files have been written to: /.../build</div>
</div><!-- fragment --><p>However, the library can be customized with various options. For example, the example codes and documentation generation can be enabled by setting the <code>STARNEIG_ENABLE_EXAMPLES</code> and <code>STARNEIG_ENABLE_DOCS</code> options: </p><div class="fragment"><div class="line">$ cmake -DSTARNEIG_ENABLE_EXAMPLES=ON -DSTARNEIG_ENABLE_DOCS=ON ../</div>
</div><!-- fragment --><p>The <em>installation path</em> can be changed during the configuration phase: </p><div class="fragment"><div class="line">$ cmake -DCMAKE_INSTALL_PREFIX=/path/to/somewhere/ ../</div>
</div><!-- fragment --><dl class="section remark"><dt>Remarks</dt><dd>The library can be compiled separately from the other software components: <div class="fragment"><div class="line">$ mkdir build-src</div>
<div class="line">$ cd build-src/</div>
<div class="line">$ cmake ../src/</div>
<div class="line">$ make</div>
</div><!-- fragment --></dd>
<dd>
It may sometimes be necessary to compile CUDA source files with a different compiler than what <code>cmake</code> uses by default. For example, some CUDA version do not support GCC compilers that are newer than GCC 5 release series. In that case <code>cmake</code> can be configured to use a GCC 5 release series compiler: <div class="fragment"><div class="line">$ cmake -DCUDA_HOST_COMPILER=/usr/bin/gcc-5 -DCUDA_PROPAGATE_HOST_FLAGS=OFF ../</div>
</div><!-- fragment --></dd></dl>
<p>List of StarNEig library specific configuration options:</p>
<ul>
<li><code>STARNEIG_ENABLE_OPTIMIZATION</code>: Enables extra compiler optimizations (<code>ON</code> by default).<ul>
<li>Can break portability.</li>
</ul>
</li>
<li><code>STARNEIG_ENABLE_EXAMPLES</code>: Enables examples (<code>OFF</code> by default).</li>
<li><code>STARNEIG_ENABLE_DOCS</code>: Enables documentation generation (<code>OFF</code> by default).</li>
<li><code>STARNEIG_ENABLE_TESTS</code>: : Enables test program (<code>ON</code> by default).</li>
<li><code>STARNEIG_ENABLE_FULL_TESTS</code>: Enables additional tests (<code>OFF</code> by default).</li>
<li><code>STARNEIG_ENABLE_REFERENCE</code>: : Enables reference MPI implementations (<code>OFF</code> by default).<ul>
<li>A user must initialize and update the included GIT submodules.</li>
</ul>
</li>
<li><code>STARNEIG_DISABLE_MPI</code>: Explicitly disables the MPI support even when the system would support it (<code>OFF</code> by default).<ul>
<li>Must be set before <code>cmake</code> is run for the first time.</li>
</ul>
</li>
<li><code>STARNEIG_DISABLE_CUDA</code>: Explicitly disables the CUDA support even when the system would support it (<code>OFF</code> by default).<ul>
<li>Must be set before <code>cmake</code> is run for the first time.</li>
</ul>
</li>
<li><code>STARNEIG_DISABLE_BLACS</code>: Explicitly disables the ScaLAPACK/BLACS support even when the system would support it (<code>OFF</code> by default).<ul>
<li>Must be set before <code>cmake</code> is run for the first time.</li>
</ul>
</li>
<li><code>STARNEIG_ENABLE_MESSAGES</code>: Enable basic verbose messages (<code>ON</code> by default).</li>
<li><code>STARNEIG_ENABLE_VERBOSE</code>: Enable additional verbose messages (<code>OFF</code> by default).</li>
<li><code>STARNEIG_ENABLE_EVENTS</code>: Enable event traces (<code>OFF</code> by default).</li>
<li><code>STARNEIG_ENABLE_EVENT_PARSER</code>: Enable event parser (<code>OFF</code> by default).</li>
<li><code>STARNEIG_ENABLE_SANITY_CHECKS</code>: Enables additional satiny checks. (<code>OFF</code> by default).<ul>
<li>These checks are very expensive and should not be enabled unless absolutely necessary.</li>
</ul>
</li>
<li><code>STARNEIG_ENABLE_PRUNING</code>: Enable task graph pruning (<code>ON</code> by default).</li>
<li><code>STARNEIG_ENABLE_MRM</code>: Enable multiple linear regression performance models (<code>OFF</code> by default).</li>
<li><code>STARNEIG_ENABLE_CUDA_REORDER_WINDOW</code>: Enable CUDA-based reorder_window codelet (<code>OFF</code> by default).</li>
<li><code>STARNEIG_ENABLE_INTEGER_SCALING</code>: Enable integer-based scaling factors (<code>ON</code> by default).</li>
</ul>
<p>The following <b>environmental variables</b> can be used to configure the used libraries:</p>
<ul>
<li><code>BLAS_LIBRARIES</code>: BLAS library.</li>
<li><code>LAPACK_LIBRARIES</code>: LAPACK library.</li>
<li><code>HWLOC_LIBRARIES</code>: Portable Hardware Locality (hwloc) library.</li>
<li><code>MPI_LIBRARIES</code>: C MPI library.</li>
<li><code>MPI_Fortran_LIBRARIES</code>: Fortran MPI library.</li>
<li><code>SCALAPACK_LIBRARIES</code>: ScaLAPACK library.</li>
<li><code>BLACS_LIBRARIES</code>: BLACS library.</li>
<li><code>STARPU_LIBRARIES</code>: StarPU library.</li>
<li><code>STARPU_MPI_LIBRARIES</code>: StarPU-MPI library.</li>
<li><code>GSL_LIBRARIES</code>: GNU Scientific Library.</li>
<li><code>MAGMA_LIBRARIES</code>: MAGMA library.</li>
<li><code>MISC_LIBRARIES</code>: Miscellaneous libraries.</li>
</ul>
<p>For example, if a user has a custom build ATLAS BLAS library and a matching LAPACK library that are not detected by the build system, then the user might define <code>BLAS_LIBRARIES=/usr/local/atlas/lib/libsatlas.so</code> and <code>LAPACK_LIBRARIES=/usr/local/atlas/lib/liblapack.so</code> before calling <code>cmake</code>.</p>
<p>The following environmental variables can be used to configure include paths for the used libraries:</p>
<ul>
<li><code>OMP_INCLUDE_PATH</code>: OpenMP include path.</li>
<li><code>BLAS_INCLUDE_PATH</code>: BLAS include path.</li>
<li><code>MKL_INCLUDE_PATH</code>: MKL include path.</li>
<li><code>HWLOC_INCLUDE_PATH</code>: Portable Hardware Locality (hwloc) include path.</li>
<li><code>MPI_INCLUDE_PATH</code>: MPI include path.</li>
<li><code>STARPU_INCLUDE_PATH</code>: StarPU include path.</li>
<li><code>GSL_INCLUDE_PATH</code>: GNU Scientific Library include path.</li>
<li><code>MAGMA_INCLUDE_PATH</code>: MAGMA include path.</li>
<li><code>MISC_INCLUDE_PATH</code>: Miscellaneous include paths.</li>
</ul>
<h1>Compile</h1>
<p>The library (and other software components) are compiled with the <code>make</code> command: </p><div class="fragment"><div class="line">$ make</div>
<div class="line">...</div>
<div class="line">[ 99%] Building C object test/CMakeFiles/starneig-test.dir/3rdparty/matrixmarket/mmio.c.o</div>
<div class="line">[100%] Linking C executable ../starneig-test</div>
<div class="line">[100%] Built target starneig-test</div>
</div><!-- fragment --><h1>Test</h1>
<p>The automated tests can be executed as follows: </p><div class="fragment"><div class="line">$ make test</div>
<div class="line">Running tests...</div>
<div class="line">Test project /.../build</div>
<div class="line">      Start  1: simple-hessenberg</div>
<div class="line"> 1/18 Test  #1: simple-hessenberg ...................   Passed   15.19 sec</div>
<div class="line">      Start  2: simple-hessenberg-mpi</div>
<div class="line"> 2/18 Test  #2: simple-hessenberg-mpi ...............   Passed   49.59 sec</div>
<div class="line">...</div>
<div class="line">      Start 17: simple-full-chain-generalized</div>
<div class="line">17/18 Test #17: simple-full-chain-generalized .......   Passed  180.50 sec</div>
<div class="line">      Start 18: simple-full-chain-generalized-mpi</div>
<div class="line">18/18 Test #18: simple-full-chain-generalized-mpi ...   Passed  195.39 sec</div>
<div class="line"> </div>
<div class="line">100% tests passed, 0 tests failed out of 18</div>
<div class="line"> </div>
<div class="line">Total Test time (real) = 1219.47 sec</div>
</div><!-- fragment --><p>The <code>STARNEIG_ENABLE_FULL_TESTS</code> <code>cmake</code> option can be used to enable additional tests.</p>
<h1>Install</h1>
<p>The library and the related header files are installed by executing: </p><div class="fragment"><div class="line">$ sudo make install</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
